<section class="chart-wrapper">
    <div class="chart-canvas" id="highcharts_wrapper"></div>
</section>

<section class="table-wrapper" ng-controller="tableCtrl">
    <button class="btn" style="float: right;"
        ng-click="exportTableAsCsv(tbFields, tableRows)"> 导出 CSV </button>
    <!-- Todo: one-bind to save watchers -->
    <table class="table table-bordered table-striped"
        infinite-scroll="loadMoreReportData()">
        <thead>
            <tr class="header-row">
                <td ng-repeat="i in tbFields"
                    ng-click="toggleRowSort(i.id)">{{i.name}}
                    <i ng-class="{
                        'icon-sort': i.id !== sortType,
                        'icon-arrow-up': i.id == sortType && !sortReverse,
                        'icon-arrow-down': i.id == sortType && sortReverse}"></i>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="row in tableRows track by $index" bindonce>
                <td ng-repeat="i in tbFields" bo-switch="getTdType(i, row)" bindonce>
                    <span bo-switch-when="date" bo-text="row.date|dateNumFormat"></span>
                    <span bo-switch-when="empty">
                        <b style="color: red">0</b>
                    </span>
                    <span bo-switch-when="metric" bo-text="row[i.id] | number"></span>
                    <span bo-switch-when="dimension" bo-text="row[i.id]"></span>
                </td>
            </tr>
        </tbody>
    </table>
    <!-- <double-bounce-spinner></double-bounce-spinner> -->
</section>