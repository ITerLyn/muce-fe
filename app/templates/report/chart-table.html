<section class="chart-wrapper">
    <div class="chart-canvas" id="highcharts_wrapper"></div>
</section>

<section class="table-wrapper" ng-controller="tableCtrl">
    <button class="btn" style="float: right;"
        ng-click="exportTableAsCsv(tbFields, tableRows)"> 导出 CSV </button>
    <!-- Todo: one-bind to save watchers -->
    <table class="table table-bordered table-striped">
        <thead>
            <tr class="header-row">
                <td ng-repeat="i in tbFields"
                    ng-click="toggleRowSort(i.id)">{{i.name}}
                    <i ng-class="{
                        'icon-sort': i.id !== sortType,
                        'icon-arrow-up': i.id == sortType && !sortReverse,
                        'icon-arrow-down': i.id == sortType && sortReverse}"></i>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="row in tableRows track by $index">
                <td ng-repeat="i in tbFields" ng-switch on="getTdType(i, row)">
                    <span ng-switch-when="date">{{row.date}}</span>
                    <span ng-switch-when="empty">
                        <b style="color: red">0</b>
                    </span>
                    <span ng-switch-when="metric">
                        <b>{{row[i.id] | number}}</b>
                    </span>
                    <span ng-switch-when="dimension">
                        <b>{{row[i.id]}}</b>
                    </span>
                </td>
            </tr>
        </tbody>
    </table>
    <!-- <double-bounce-spinner></double-bounce-spinner> -->
</section>